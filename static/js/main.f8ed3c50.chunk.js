(this.webpackJsonpexam_platform_client=this.webpackJsonpexam_platform_client||[]).push([[0],{26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(22),o=a.n(s),l=(a(31),a(14)),c=a(2),u=a(3),i=a(5),m=a(4),d=a(6),h=a(13),p=a(1),E=a(9),b=(Object(E.a)({}),a(8)),f=a.n(b),g=a(11),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).usernameChangeHandler=function(e){a.setState({username:e.target.value})},a.passwordChangeHandler=function(e){a.setState({password:e.target.value})},a.roleChangeHandler=function(e){a.setState({role:e.target.value})},a.handleSubmit=function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.state.username.length>0&&a.state.password.length>0)){e.next=4;break}return e.next=4,fetch("".concat(a.props.domain,"/").concat(a.state.role,"/login"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){a.props.userIdChangeHandler(e.user.id),a.props.tokenChangeHandler(e.token),a.props.roleChangeHandler(a.state.role),a.setState({redirect:!0})})).catch((function(e){console.log(e),alert("Wrong username, password or role.")}));case 4:console.log(a.props.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.goToRegister=function(e){e.preventDefault()},a.state={username:"",password:"",role:"students",redirect:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.redirect?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.username,placeholder:"Username",onChange:this.usernameChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",className:"form-control",value:this.state.password,placeholder:"Password",onChange:this.passwordChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Your role: "),r.a.createElement("select",{className:"form-control",value:this.state.role,onChange:this.roleChangeHandler},r.a.createElement("option",{value:"students"},"student"),r.a.createElement("option",{value:"teachers"},"teacher"))),r.a.createElement("input",{className:"btn",type:"submit",value:"Login"}),r.a.createElement("div",{className:"mt-4 mb-2"},"Not registerd? Go to register!"),r.a.createElement(p.b,{to:"/register"},r.a.createElement("button",{className:"btn"}," Register"))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).usernameChangeHandler=function(e){a.setState({username:e.target.value})},a.passwordChangeHandler=function(e){a.setState({password:e.target.value})},a.roleChangeHandler=function(e){a.setState({role:e.target.value})},a.handleSubmit=function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.state.username.length>0&&a.state.password.length>0)){e.next=4;break}return e.next=4,fetch("".concat(a.props.domain,"/").concat(a.state.role),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a.state.username,password:a.state.password})}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("Registration success!")})).catch((function(e){console.log(e),alert("An error occured: ",e)}));case 4:console.log(a.props.user);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={username:"",password:"",role:"students"},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h2",null,"Register"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.username,placeholder:"Username",onChange:this.usernameChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"text",className:"form-control",value:this.state.password,placeholder:"Password",onChange:this.passwordChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Your role: "),r.a.createElement("select",{className:"form-control",value:this.state.role,onChange:this.roleChangeHandler},r.a.createElement("option",{value:"students"},"student"),r.a.createElement("option",{value:"teachers"},"teacher"))),r.a.createElement("div",null,r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Register"})),r.a.createElement("div",{className:"mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn"},"Go to login page")))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).categoryChangeHandler=function(e){e.preventDefault(),a.setState({category:e.target.value})},a.questionChangeHandler=function(e){e.preventDefault(),a.setState({question:e.target.value})},a.answerChangeHandler=function(e){e.preventDefault();var t=a.state.answerOptions;t[e.target.name.slice(8)-1]={answerNo:e.target.name.slice(8),answer:e.target.value},a.setState(Object(l.a)({},a.state,{answerOptions:t}))},a.addAnswer=function(e){e.preventDefault();var t=a.state.answerOptions;t.push({answerNo:t.length+1,answer:""}),a.setState(Object(l.a)({},a.state,{answerOptions:t}))},a.correctAnswerChangeHandler=function(e){e.preventDefault(),a.setState({correctAnswerNo:e.target.value})},a.handleSubmit=function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(a.state.category.length>0&&a.state.question.length>0)||a.state.answerOptions.find((function(e){return 0===e.answer.length}))){e.next=6;break}return e.next=4,fetch("".concat(a.props.domain,"/teachers/addQuestion"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then((function(e){alert("Create question success!"),console.log(e),a.setState({category:"",question:"",correctAnswerNo:1,answerOptions:[{answerNo:1,answer:""}]})})).catch((function(e){return console.log(e)}));case 4:e.next=7;break;case 6:alert("Some fields are not filled correctly");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={category:"",question:"",correctAnswerNo:1,answerOptions:[{answerNo:1,answer:""}]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"Create a question"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Category:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Category",value:this.state.category,onChange:this.categoryChangeHandler})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Question:"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Question",value:this.state.question,onChange:this.questionChangeHandler})),r.a.createElement("table",{className:"table"},this.state.answerOptions.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,"Answer ",e.state.answerOptions[a].answerNo,":"),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"answerNo"+e.state.answerOptions[a].answerNo,value:e.state.answerOptions[a].answer,onChange:e.answerChangeHandler})))}))),r.a.createElement("button",{className:"btn btn-secondary",onClick:this.addAnswer},"+"),r.a.createElement("br",null),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Correct answer: Answer \xa0"),r.a.createElement("div",{className:"col-3"},r.a.createElement("select",{class:"form-control",defaultValue:this.state.answerOptions[0].answerNo,onChange:this.props.roleChangeHandler},this.state.answerOptions.map((function(e,t){return r.a.createElement("option",{value:e.answerNo,key:t},e.answerNo)}))))),r.a.createElement("br",null),r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Create question"}),r.a.createElement("br",null)))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).toggleQuestionSelect=function(e,t){var n=a.state.value;n[t]=e.target.checked;var r=a.state.selectedQuestionArray;e.target.checked?r.push(parseInt(e.target.name)):r.splice(r.findIndex((function(t){return t===e.target.name})),1),a.setState({value:n,selectedQuestionArray:r})},a.nameChangeHandler=function(e){e.preventDefault(),a.setState({name:e.target.value})},a.targetChangeHandler=function(e){e.preventDefault(),a.setState({target:e.target.value})},a.submitHandler=function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((n={teacherId:a.props.user.userId,name:a.state.name,questionsList:a.state.selectedQuestionArray,target:a.state.target}).name.length>0&&n.target.length>0&&("all"===n.target||"number"===typeof parseInt(n.target))&&n.questionsList.length>0)){e.next=7;break}return e.next=5,fetch("".concat(a.props.domain,"/teachers/createExam"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("Exam created"),a.setState({name:"",target:"",selectedQuestionArray:[],value:[]})})).catch((function(e){return console.log(e)}));case 5:e.next=8;break;case 7:alert("Some fields are not filled correctly");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getStudentsList=function(e){e.preventDefault(),fetch("".concat(a.props.domain,"/students"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token}}).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({studentList:e.rows})})).catch((function(e){return console.log(e)}))},a.state={error:null,isLoaded:!1,name:"",target:"",questionsArray:null,selectedQuestionArray:[],value:[],studentList:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/teachers/getQuestions"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token}}).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,questionsArray:t.rows}),console.log(t.rows)}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"componentDidUpdate",value:function(){console.log(this.state.selectedQuestionArray)}},{key:"render",value:function(){var e=this;return"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"Create Exam"),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Exam name:"),r.a.createElement("input",{className:"form-control col",type:"text",value:this.state.name,onChange:this.nameChangeHandler})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Target:"),r.a.createElement("input",{className:"form-control col",type:"text",value:this.state.target,onChange:this.targetChangeHandler})),r.a.createElement("small",null,'Target can only be "all" or a student\'s id'),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"}),r.a.createElement("th",{scope:"col"},"Category"),r.a.createElement("th",{scope:"col"},"Question"))),this.state.questionsArray.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,r.a.createElement("input",{name:t.id,type:"checkbox",checked:e.state.value[a],onChange:function(t){e.toggleQuestionSelect(t,a)}})),r.a.createElement("td",null,t.category),r.a.createElement("td",null,t.question))}))),r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Create exam")),r.a.createElement("br",null),r.a.createElement("hr",null),null===this.state.studentList?r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:this.getStudentsList},"Get students list"):null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,null===this.state.studentList?null:r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Student id"),r.a.createElement("th",{scope:"col"},"Student username"))),r.a.createElement("tbody",null,null===this.state.studentList?null:this.state.studentList.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username))}))))):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h2",null,"Teacher's menu"),r.a.createElement("div",{className:"mt-3"},r.a.createElement(p.b,{to:"/createQuestions"},r.a.createElement("button",{className:"btn btn-outline-success"},"Create questions"))),r.a.createElement("div",{className:"mt-3"},r.a.createElement(p.b,{to:"/createExams"},r.a.createElement("button",{className:"btn btn-outline-success"},"Create exams"))),r.a.createElement("div",{className:"mt-3"},r.a.createElement(p.b,{to:"/createExamsWithCategory"},r.a.createElement("button",{className:"btn btn-outline-primary"},"Create exams with category"))),r.a.createElement("div",{className:"mt-3"},r.a.createElement(p.b,{to:"/schoolResults"},r.a.createElement("button",{className:"btn btn-outline-warning"},"School results"))))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-4"},r.a.createElement("h2",null,"Student's menu"),r.a.createElement("div",{className:"my-3"},r.a.createElement(p.b,{to:"/availableExams"},r.a.createElement("button",{className:"btn btn-primary"},"Available exams"))),r.a.createElement("div",null,r.a.createElement(p.b,{to:"/completedExams"},r.a.createElement("button",{className:"btn btn-info"},"Completed exams"))))}}]),t}(n.Component),C=Object(h.f)(w),x=a(25),k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleRadioChange=function(e,t,n){Object(x.a)(a.state.answers).forEach((function(e){e.questionId===t&&(e.answerNo=n)})),console.log({questionId:t,answerNo:n})},a.handleSubmit=function(){var e=Object(g.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(a.props.domain,"/students/returnExam"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token},body:JSON.stringify({examId:a.state.examId,studentId:a.props.user.userId,answers:a.state.answers})}).then((function(e){return e.json()})).then((function(e){console.log(e),alert("Exam submit complete"),a.setState({examReturned:!0,examResult:e.results[0]})})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={error:null,isLoaded:!1,examId:a.props.location.state.examId,questionList:[],answers:[],examReturned:!1,examResult:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/students/getExam"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token},body:JSON.stringify({examId:this.props.location.state.examId})}).then((function(e){return e.json()})).then((function(t){var a=[];t.questionList.forEach((function(e){a.push({questionId:e.questionId,answerNo:0})})),e.setState({isLoaded:!0,examId:t.examId,questionList:t.questionList,answers:a}),console.log(t)}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this;return"students"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?this.state.examReturned?r.a.createElement(h.a,{to:{pathname:"/resultExam",result:this.state.examResult}}):r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"Exam id: ",this.state.examId),r.a.createElement("form",{onSubmit:this.handleSubmit,ref:this.state.form},this.state.questionList.map((function(t,a){return r.a.createElement("div",{className:"ml-4",key:a},r.a.createElement("h3",null,t.question),t.answerOptions.map((function(a,n){return r.a.createElement("div",{className:"ml-4",key:n},r.a.createElement("input",{type:"radio",name:t.questionId,onChange:function(n){e.handleRadioChange(n,t.questionId,a.answerNo)}}),a.answer)})))})),r.a.createElement("input",{className:"btn btn-primary",type:"submit",value:"Submit exam"}))):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={error:null,isLoaded:!0,pendingExams:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/students/pendingExams"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token},body:JSON.stringify({id:this.props.user.userId})}).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,pendingExams:t}),console.log(t.rows)}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){return"students"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",{className:"my-4"},"Pending Exams"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Exam id"),r.a.createElement("th",{scope:"col"},"Exam name"),r.a.createElement("th",{scope:"col"},"Number of questions"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,this.state.pendingExams.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"col"},e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.numberOfQuestions),r.a.createElement("td",null,r.a.createElement(p.b,{to:{pathname:"/takeExam",state:{examId:e.id}}},r.a.createElement("button",{className:"btn btn-outline-primary"},"Take"))))})))),r.a.createElement("br",null)):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={error:null,isLoaded:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){void 0===this.props.location.result&&this.setState({error:!0}),this.props.location.result&&this.setState({isLoaded:!0})}},{key:"render",value:function(){return"students"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"Exam result"),r.a.createElement("div",null,"Score: ",r.a.createElement("b",null,this.props.location.result.score)),r.a.createElement("div",null,"Submit time: ",this.props.location.result.date),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Question No"),r.a.createElement("th",{scope:"col"},"Your answer"),r.a.createElement("th",{scope:"col"},"Correct answer"))),r.a.createElement("tbody",null,this.props.location.result.studentAnswers.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},t+1),r.a.createElement("td",null,e.studentAnswerContent),r.a.createElement("td",null,e.correctAnswerContent))})))),r.a.createElement("br",null)):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={error:null,isLoaded:!1,data:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/students/getCompletedResults"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token},body:JSON.stringify({id:this.props.user.userId})}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoaded:!0,data:t.rows})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return"students"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",{className:"my-4"},"Completed Exams"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Result id"),r.a.createElement("th",{scope:"col"},"Exam id"),r.a.createElement("th",{scope:"col"},"Score"),r.a.createElement("th",{scope:"col"},"Date completed"))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"col"},e.id),r.a.createElement("td",null,e.examId),r.a.createElement("td",null,e.score),r.a.createElement("td",null,e.date))})))),r.a.createElement("br",null)):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={error:null,isLoaded:!1,data:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/teachers/examResults/"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoaded:!0,data:t.resultsArray})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"School results"),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Result id"),r.a.createElement("th",{scope:"col"},"Exam id"),r.a.createElement("th",{scope:"col"},"Student id"),r.a.createElement("th",{scope:"col"},"Student username"),r.a.createElement("th",{scope:"col"},"Score"),r.a.createElement("th",{scope:"col"},"Date completed"),r.a.createElement("th",{scope:"col"}))),r.a.createElement("tbody",null,this.state.data.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"col"},e.id),r.a.createElement("td",null,e.examId),r.a.createElement("td",null,e.studentId),r.a.createElement("td",null,e.studentUsername),r.a.createElement("td",null,e.score),r.a.createElement("td",null,e.date),r.a.createElement("td",null,r.a.createElement(p.b,{className:"btn btn-link",to:{pathname:"/individualResults",id:e.id}},"View details")))})))),r.a.createElement("br",null)):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={error:null,isLoaded:!1,data:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/teachers/examResults/").concat(this.props.location.id),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token}}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({isLoaded:!0,data:t.results[0]})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",null,"Individual result"),r.a.createElement("div",null,"Result id: ",this.state.data.id),r.a.createElement("div",null,"Exam id: ",this.state.data.examId),r.a.createElement("div",null,"Student id: ",this.state.data.studentId),r.a.createElement("div",null,"Student username: ",this.state.data.studentUsername),r.a.createElement("div",null,"Score: ",r.a.createElement("b",null,this.state.data.score)),r.a.createElement("div",null,"Submit time: ",this.state.data.date),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Question No"),r.a.createElement("th",{scope:"col"},"Student's answer"),r.a.createElement("th",{scope:"col"},"Correct answer"))),r.a.createElement("tbody",null,this.state.data.studentAnswers.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},t+1),r.a.createElement("td",null,e.studentAnswerContent),r.a.createElement("td",null,e.correctAnswerContent))})))),r.a.createElement("br",null),r.a.createElement(p.b,{to:"/schoolResults"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to School Results"))):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),A=a(17),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).inputChangeHandler=function(e){e.preventDefault(),a.setState(Object(A.a)({},e.target.name,e.target.value))},a.submitHandler=function(){var e=Object(g.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!((n={teacherId:a.props.user.userId,name:a.state.name,category:a.state.category,numberOfQuestions:a.state.numberOfQuestions,target:a.state.target}).name.length>0&&n.target.length>0&&("all"===n.target||"number"===typeof parseInt(n.target))&&n.numberOfQuestions>0)){e.next=7;break}return e.next=5,fetch("".concat(a.props.domain,"/teachers/createExamWithCategory"),{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log(e),1===e.code?(alert("Exam created"),a.setState({name:"",target:"",category:"",numberOfQuestions:0})):0===e.code&&"Number of questions selected is greater than number of questions in the database"===e.err?alert(e.err):alert("Something went wrong")})).catch((function(e){console.log(e),alert("Something went wrong")}));case 5:e.next=8;break;case 7:alert("Some fields are not filled correctly");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.getStudentsList=function(e){e.preventDefault(),fetch("".concat(a.props.domain,"/students"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a.props.user.token}}).then((function(e){return e.json()})).then((function(e){console.log(e),a.setState({studentList:e.rows})})).catch((function(e){return console.log(e)}))},a.state={error:null,isLoaded:!1,name:"",target:"",category:"",numberOfQuestions:0,questionCategories:[],studentList:null},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(this.props.domain,"/teachers/questionCategories"),{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.props.user.token}}).then((function(e){return e.json()})).then((function(t){e.setState({isLoaded:!0,questionCategories:t.rows,category:t.rows[0]}),console.log(t.rows)}),(function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){return"teachers"!==this.props.user.role?(alert("Forbidden"),r.a.createElement(h.a,{to:"/"})):this.state.error?r.a.createElement("div",null,"Error happened"):this.state.isLoaded?r.a.createElement("div",{className:"container mt-4"},r.a.createElement(p.b,{to:"/"},r.a.createElement("button",{className:"btn btn-outline-secondary"},"Back to menu")),r.a.createElement("br",null),r.a.createElement("h2",{className:"my-2"},"Create Exam with category"),r.a.createElement("form",{onSubmit:this.submitHandler},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Exam name:"),r.a.createElement("input",{className:"form-control col",type:"text",name:"name",value:this.state.name,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Category:"),r.a.createElement("select",{className:"form-control col-3",name:"category",defaultValue:this.state.questionCategories[0],value:this.state.category,onChange:this.inputChangeHandler},this.state.questionCategories.map((function(e,t){return r.a.createElement("option",{value:e,key:t},e)})))),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Number of questions: "),r.a.createElement("input",{className:"form-control col",type:"number",name:"numberOfQuestions",value:this.state.numberOfQuestions,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-3"},"Target:"),r.a.createElement("input",{className:"form-control col",type:"text",name:"target",value:this.state.target,onChange:this.inputChangeHandler})),r.a.createElement("small",null,'Target can only be "all" or a student\'s id'),r.a.createElement("div",{className:"mt-2"},r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Create exam"))),r.a.createElement("br",null),r.a.createElement("hr",null),null===this.state.studentList?r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:this.getStudentsList},"Get students list"):null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,null===this.state.studentList?null:r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Student id"),r.a.createElement("th",{scope:"col"},"Student username"))),r.a.createElement("tbody",null,null===this.state.studentList?null:this.state.studentList.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username))}))))):r.a.createElement("h5",null,"Loading...")}}]),t}(n.Component),R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).userIdChangeHandler=function(e){a.setState({user:Object(l.a)({},a.state.user,{userId:e})})},a.tokenChangeHandler=function(e){a.setState({user:Object(l.a)({},a.state.user,{token:e})})},a.roleChangeHandler=function(e){a.setState({user:Object(l.a)({},a.state.user,{role:e})})},a.examTakingHandler=function(e){return a.setState(Object(l.a)({},a.state.user,{examTaking:e})),r.a.createElement(h.a,{to:"/takeExam"})},a.state={domain:"https://powerful-dusk-96983.herokuapp.com",user:{userId:null,role:"",token:"",examTaking:null},landingPage:function(e){return r.a.createElement(v,Object.assign({},e,{domain:a.state.domain,user:a.state.user,userIdChangeHandler:a.userIdChangeHandler,tokenChangeHandler:a.tokenChangeHandler,roleChangeHandler:a.roleChangeHandler}))},currentRoute:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(){var e=this;console.log(this.state.user),this.state.user.token.length>0&&"teachers"===this.state.user.role&&"teachers"!==this.state.currentRoute&&this.setState({currentRoute:"teachers",landingPage:function(t){return r.a.createElement(j,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),this.state.user.token.length>0&&"students"===this.state.user.role&&"students"!==this.state.currentRoute&&this.setState({currentRoute:"students",landingPage:function(t){return r.a.createElement(C,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null,r.a.createElement(h.b,{path:"/",exact:!0,render:this.state.landingPage}),r.a.createElement(h.b,{path:"/register",exact:!0,render:function(t){return r.a.createElement(y,Object.assign({},t,{domain:e.state.domain,user:e.state.user,roleChangeHandler:e.roleChangeHandler}))}}),r.a.createElement(h.b,{path:"/createQuestions",exact:!0,render:function(t){return r.a.createElement(O,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/createExams",exact:!0,render:function(t){return r.a.createElement(N,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/createExamsWithCategory",exact:!0,render:function(t){return r.a.createElement(q,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/takeExam",exact:!0,render:function(t){return r.a.createElement(k,Object.assign({},t,{domain:e.state.domain,user:e.state.user,examTaking:e.state.user.examTaking}))}}),r.a.createElement(h.b,{path:"/availableExams",exact:!0,render:function(t){return r.a.createElement(S,Object.assign({},t,{domain:e.state.domain,user:e.state.user,examTakingHandler:e.examTakingHandler}))}}),r.a.createElement(h.b,{path:"/resultExam",exact:!0,render:function(t){return r.a.createElement(L,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/completedExams",exact:!0,render:function(t){return r.a.createElement(H,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/schoolResults",exact:!0,render:function(t){return r.a.createElement(T,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}}),r.a.createElement(h.b,{path:"/individualResults",exact:!0,render:function(t){return r.a.createElement(I,Object.assign({},t,{domain:e.state.domain,user:e.state.user}))}})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.f8ed3c50.chunk.js.map